
use v6.d;
use lib 'lib';
use lib 'app';

use models;
use Test;

plan 6;

%*ENV<DISABLE-SQL-LOG> = True;

my Image $image;

$image = Image.build({});
ok $image.is-invalid;
ok $image.errors.format == ['must be present', 'is invalid'];

$image = Image.build({format => 'foo'});
ok $image.is-invalid;
ok $image.errors.format == ['is invalid'];

$image = Image.build({format => 'jpg'});
ok $image.is-valid;
nok $image.errors.format;
