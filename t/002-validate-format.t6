
use v6.d;
use lib 'lib';
use lib 'app';

use models;
use Test;

plan 6;

%*ENV<DISABLE-SQL-LOG> = True;

my Contact $contact;

$contact = Contact.create({});
ok $contact.is-invalid;
ok $contact.errors.email == ['must be present', 'is invalid'];

$contact = Contact.create({email => 'foo'});
ok $contact.is-invalid;
ok $contact.errors.email == ['is invalid'];

$contact = Contact.create({email => 'foo@bar.com'});
ok $contact.is-valid;
nok $contact.errors.email;
